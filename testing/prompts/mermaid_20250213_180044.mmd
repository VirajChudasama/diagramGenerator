%%{init: {'theme': 'base', 'themeVariables': {'background': '#F5F5DC', 'primaryColor': '#87CEEB', 'edgeLabelBackground': '#FF4500'}}}%%
flowchart TD
    A[User Interaction & Authentication]:::lightBlue -->|Access via| B[Web]:::lightBlue
    A -->|Access via| C[Mobile]:::lightBlue
    A -->|Access via| D[Smart TV]:::lightBlue
    A -->|Access via| E[Gaming Console]:::lightBlue
    A -->|Login via| F[OAuth]:::lightBlue
    A -->|Login via| G[Google]:::lightBlue
    A -->|Login via| H[Facebook]:::lightBlue
    A -->|Login via| I[Email]:::lightBlue
    A -->|Multi-profile selection| J[Profiles]:::lightBlue
    A -->|Secure session handling| K[Session]:::lightBlue
    
    L[Content Discovery & Recommendation]:::lightGreen --> A
    L -->|Personalized homepage| M[Homepage]:::lightGreen
    L -->|AI-powered recommendation| N[Recommendations]:::lightGreen
    L -->|Search with filters| O[Search]:::lightGreen
    L -->|Trending and Top 10 lists| P[Trending Lists]:::lightGreen

    Q[Content Management & CDN Distribution]:::lightYellow --> L
    Q -->|Stored in DB| R[Distributed Database]:::lightYellow
    Q -->|Processed via CMS| S[Content Management System]:::lightYellow
    Q -->|Encoding & transcoding| T[Media Processing]:::lightYellow
    Q -->|CDN integration| U[CDN Edge Servers]:::lightYellow
    Q -->|DRM enforcement| V[DRM]:::lightYellow

    W[Streaming & Playback]:::lightOrange --> Q
    W -->|Adaptive Bitrate Streaming| X[ABR]:::lightOrange
    W -->|Video player| Y[Video Player]:::lightOrange
    Y -->|Subtitles| Z[Subtitles]:::lightOrange
    Y -->|Multi-audio tracks| AA[Audio Tracks]:::lightOrange
    W -->|Buffering & preloading| AB[Buffering]:::lightOrange
    W -->|Watch history tracking| AC[Watch History]:::lightOrange

    AD[User Activity & Engagement Tracking]:::lightGrey --> W
    AD -->|Real-time analytics| AE[Analytics]:::lightGrey
    AD -->|AI-powered insights| AF[Insights]:::lightGrey
    AD -->|Parental controls| AG[Parental Controls]:::lightGrey

    AH[Billing & Subscription Management]:::lightRed --> AD
    AH -->|Subscription plans| AI[Plans]:::lightRed
    AH -->|Secure payment gateways| AJ[Payment Gateways]:::lightRed
    AH -->|Auto-renewal & cancellation| AK[Renewal & Cancellation]:::lightRed
    AH -->|Notifications for payment failures| AL[Notifications]:::lightRed

    AM[System Monitoring & Security]:::lightRed --> AH
    AM -->|Load balancing| AN[Traffic Distribution]:::lightRed
    AM -->|Logging & error handling| AO[Logging]:::lightRed
    AM -->|AI-driven fraud detection| AP[Fraud Detection]:::lightRed
    AM -->|Compliance with laws| AQ[Compliance]:::lightRed

    classDef lightBlue fill:#87CEEB,stroke:#333,stroke-width:2px;
    classDef lightGreen fill:#98FB98,stroke:#333,stroke-width:2px;
    classDef lightYellow fill:#FFFFE0,stroke:#333,stroke-width:2px;
    classDef lightOrange fill:#FFE4B5,stroke:#333,stroke-width:2px;
    classDef lightGrey fill:#D3D3D3,stroke:#333,stroke-width:2px;
    classDef lightRed fill:#FFB6C1,stroke:#333,stroke-width:2px;