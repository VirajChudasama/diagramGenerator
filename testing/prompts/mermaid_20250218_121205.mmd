%%{init: {'theme': 'base', 'themeVariables': {'background': '#F5F5DC', 'primaryColor': '#87CEEB', 'edgeLabelBackground': '#FF4500'}}}%%
flowchart TD
    subgraph User_Interaction [User Interaction & Authentication]
        direction TB
        UI1[Users access via Web, Mobile, Smart TV, Gaming Console]:::lightBlue
        UI2[Login via OAuth, Google, Facebook, Email]:::lightBlue
        UI3[Multi-profile selection]:::lightBlue
        UI4[Secure session handling]:::lightBlue
    end

    subgraph Content_Discovery [Content Discovery & Recommendation]
        direction TB
        CD1[Personalized homepage]:::lightGreen
        CD2[AI-powered recommendation\nusing collaborative filtering\n& deep learning]:::lightGreen
        CD3[Search with filters like\n genre, language, release year]:::lightGreen
        CD4[Trending and Top 10 lists]:::lightGreen
    end

    subgraph Content_Management [Content Management & CDN Distribution]
        direction TB
        CM1[Content stored in distributed database]:::lightYellow
        CM2[Processed via CMS]:::lightYellow
        CM3[Encoding & transcoding\nfor multiple resolutions]:::lightYellow
        CM4[CDN integration with edge servers]:::lightYellow
        CM5[DRM enforcement]:::lightYellow
    end

    subgraph Streaming_Playback [Streaming & Playback]
        direction TB
        SP1[Adaptive Bitrate Streaming\nfor dynamic quality]:::lightOrange
        SP2[Video player with subtitles,\nmulti-audio tracks,\nplayback speed control]:::lightOrange
        SP3[Buffering, preloading\nfor seamless experience]:::lightOrange
        SP4[Watch history tracking\n& resume playback]:::lightOrange
    end

    subgraph User_Activity [User Activity & Engagement Tracking]
        direction TB
        UA1[Real-time analytics on watch time,\nsession duration]:::lightGrey
        UA2[AI-powered insights for better recommendations]:::lightGrey
        UA3[Parental controls & content restrictions]:::lightGrey
    end

    subgraph Billing_Security [Billing & Subscription Management]
        direction TB
        BS1[Subscription plans – Basic,\nStandard, Premium]:::lightRed
        BS2[Secure payment gateways –\nCredit/Debit Cards, PayPal,\nApple Pay, Google Pay]:::lightRed
        BS3[Auto-renewal & cancellation options]:::lightRed
        BS4[Notifications for payment failures]:::lightRed
    end

    subgraph System_Monitoring [System Monitoring & Security]
        direction TB
        SM1[Load balancing for traffic distribution]:::lightRed
        SM2[Logging, error handling,\nserver health monitoring]:::lightRed
        SM3[AI-driven fraud detection]:::lightRed
        SM4[Compliance with GDPR,\nPCI-DSS, and regional data laws]:::lightRed
    end

    %% Connections
    UI1 --> UI2
    UI2 --> UI3
    UI3 --> UI4
    
    UI4 --> CD1
    CD1 --> CD2
    CD2 --> CD3
    CD3 --> CD4
    
    CD4 --> CM1
    CM1 --> CM2
    CM2 --> CM3
    CM3 --> CM4
    CM4 --> CM5
    
    CM5 --> SP1
    SP1 --> SP2
    SP2 --> SP3
    SP3 --> SP4
    
    SP4 --> UA1
    UA1 --> UA2
    UA2 --> UA3
    
    UA3 --> BS1
    BS1 --> BS2
    BS2 --> BS3
    BS3 --> BS4
    
    BS4 --> SM1
    SM1 --> SM2
    SM2 --> SM3
    SM3 --> SM4

%% Apply arrow color using linkStyle (edge styling)
    linkStyle 0 stroke:#FF4500,stroke-width:2px;
    linkStyle 1 stroke:#FF4500,stroke-width:2px;
    linkStyle 2 stroke:#FF4500,stroke-width:2px;
    linkStyle 3 stroke:#FF4500,stroke-width:2px;
    linkStyle 4 stroke:#FF4500,stroke-width:2px;
    linkStyle 5 stroke:#FF4500,stroke-width:2px;
    linkStyle 6 stroke:#FF4500,stroke-width:2px;
    linkStyle 7 stroke:#FF4500,stroke-width:2px;
    linkStyle 8 stroke:#FF4500,stroke-width:2px;
    linkStyle 9 stroke:#FF4500,stroke-width:2px;
    linkStyle 10 stroke:#FF4500,stroke-width:2px;
    linkStyle 11 stroke:#FF4500,stroke-width:2px;
    linkStyle 12 stroke:#FF4500,stroke-width:2px;
    linkStyle 13 stroke:#FF4500,stroke-width:2px;
    linkStyle 14 stroke:#FF4500,stroke-width:2px;
    linkStyle 15 stroke:#FF4500,stroke-width:2px;
    linkStyle 16 stroke:#FF4500,stroke-width:2px;
    linkStyle 17 stroke:#FF4500,stroke-width:2px;
    linkStyle 18 stroke:#FF4500,stroke-width:2px;
    linkStyle 19 stroke:#FF4500,stroke-width:2px;
    linkStyle 20 stroke:#FF4500,stroke-width:2px;
    linkStyle 21 stroke:#FF4500,stroke-width:2px;
    linkStyle 22 stroke:#FF4500,stroke-width:2px;
    linkStyle 23 stroke:#FF4500,stroke-width:2px;
    linkStyle 24 stroke:#FF4500,stroke-width:2px;
    linkStyle 25 stroke:#FF4500,stroke-width:2px;
    linkStyle 26 stroke:#FF4500,stroke-width:2px;