%%{init: {'theme': 'base', 'themeVariables': {'background': '#F5F5DC', 'primaryColor': '#87CEEB', 'edgeLabelBackground': '#FF4500'}}}%%
flowchart TD
    A[User Interaction & Authentication]:::lightBlue -->|User Access| B[Content Discovery & Recommendation]:::lightGreen
    B -->|User Profiles| C[Content Management & CDN Distribution]:::lightYellow
    C -->|Content Storage| D[Streaming & Playback]:::lightOrange
    D -->|Playback Feedback| E[User Activity & Engagement Tracking]:::lightGrey
    E -->|Activity Data| B
    E -->|Session Data| F[Billing & Subscription Management]:::lightRed
    F -->|Payment Data| G[System Monitoring & Security]:::lightRed
    G -->|Security Data| A
    
    subgraph UserInteraction [User Interaction & Authentication]
      direction TB
      A1[Web] 
      A2[Mobile] 
      A3[Smart TV] 
      A4[Gaming Console]
      A5[Login Options] 
      A6[Multi-Profile Selection] 
      A7[Secure Session Handling] 
    end

    subgraph ContentDiscovery [Content Discovery & Recommendation]
      direction TB
      B1[Personalized Homepage] 
      B2[AI-Powered Recommendation]
      B3[Search with Filters]
      B4[Trending and Top 10 Lists]
    end

    subgraph ContentManagement [Content Management & CDN Distribution]
      direction TB
      C1[Distributed Database] 
      C2[Encoding & Transcoding]
      C3[CDN Integration]
      C4[DRM Enforcement]
    end

    subgraph StreamingPlayback [Streaming & Playback]
      direction TB
      D1[Adaptive Bitrate Streaming]
      D2[Video Player Features]
      D3[Buffering & Preloading]
      D4[Watch History & Resume Playback]
    end

    subgraph UserActivity [User Activity & Engagement Tracking]
      direction TB
      E1[Real-time Analytics]
      E2[AI-Powered Insights]
      E3[Parental Controls]
    end

    subgraph Billing [Billing & Subscription Management]
      direction TB
      F1[Subscription Plans]
      F2[Secure Payment Gateways]
      F3[Auto-renewal & Cancellation]
      F4[Payment Notifications]
    end

    subgraph Monitoring [System Monitoring & Security]
      direction TB
      G1[Load Balancing]
      G2[Logging & Error Handling]
      G3[AI-Driven Fraud Detection]
      G4[Compliance Monitoring]
    end

    classDef lightBlue fill:#87CEEB;
    classDef lightGreen fill:#90EE90;
    classDef lightYellow fill:#FFD700;
    classDef lightOrange fill:#FFA07A;
    classDef lightGrey fill:#D3D3D3;
    classDef lightRed fill:#FFCCCB;