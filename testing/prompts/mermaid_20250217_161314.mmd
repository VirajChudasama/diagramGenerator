%%{init: {'theme': 'base', 'themeVariables': {'background': '#F5F5DC', 'primaryColor': '#87CEEB', 'edgeLabelBackground': '#FF4500', 'primaryTextColor': '#FF4500', 'tertiaryColor': '#FF4500'}}}%%
flowchart TD
    subgraph User_Interaction[User Interaction & Authentication]
        A1[Users access via Web, Mobile, Smart TV, Gaming Console]
        A2[Login via OAuth, Google, Facebook, Email]
        A3[Multi-profile selection]
        A4[Secure session handling]
    end

    subgraph Content_Discovery[Content Discovery & Recommendation]
        B1[Personalized homepage]
        B2[AI-powered recommendation\nusing collaborative filtering & deep learning]
        B3[Search with filters\nlike genre, language, release year]
        B4[Trending and Top 10 lists]
    end

    subgraph Content_Management[Content Management & CDN Distribution]
        C1[Content stored in a distributed database\nprocessed via CMS]
        C2[Encoding & transcoding for multiple resolutions]
        C3[CDN integration with edge servers]
        C4[DRM enforcement]
    end

    subgraph Streaming_Playback[Streaming & Playback]
        D1[Adaptive Bitrate Streaming\nfor dynamic quality]
        D2[Video player with subtitles,\nmulti-audio tracks, playback speed control]
        D3[Buffering, preloading for seamless experience]
        D4[Watch history tracking & resume playback]
    end

    subgraph User_Activity[User Activity & Engagement Tracking]
        E1[Real-time analytics on watch time,\nsession duration]
        E2[AI-powered insights for better recommendations]
        E3[Parental controls & content restrictions]
    end

    subgraph Billing_Subscription[Billing & Subscription Management]
        F1[Subscription plans – Basic, Standard, Premium]
        F2[Secure payment gateways – Credit/Debit Cards,\nPayPal, Apple Pay, Google Pay]
        F3[Auto-renewal & cancellation options]
        F4[Notifications for payment failures]
    end

    subgraph System_Monitoring[System Monitoring & Security]
        G1[Load balancing for traffic distribution]
        G2[Logging, error handling, server health monitoring]
        G3[AI-driven fraud detection]
        G4[Compliance with GDPR,\nPCI-DSS, and regional data laws]
    end

    %% Connect user interaction to content discovery
    A1 --> B1
    A2 --> A3
    A1 --> A4
    A3 --> B1
    A4 --> B2

    %% Connect content discovery to content management
    B1 --> C1
    B2 --> C2
    B3 --> C1
    B4 --> C1

    %% Connect content management to streaming & playback
    C1 --> D1
    C2 --> D1
    C3 --> D1
    C4 --> D1

    %% Connect streaming & playback to user activity
    D1 --> E1
    D2 --> E2
    D4 --> E1

    %% Connect user activity to billing & subscription
    E1 --> F1
    E2 --> F1

    %% Connect billing & subscription to system monitoring
    F2 --> G1
    F3 --> G2
    F4 --> G2

    %% Connect system monitoring to all modules for security
    G2 --> A1
    G2 --> B1
    G2 --> C1
    G2 --> D1
    G2 --> E1
    G2 --> F1